/* 为BOOK表创建一个更新触发器B_UPDATE，当修改BOOK表中清华大学出版社的图书定价时，如果修改值大于100，则不能修改此图书的定价*/
USE JXGL2
GO
/*若存在同名的触发器,则删之*/
IF EXISTS(SELECT NAME FROM sysobjects WHERE name = 'TRIGGER_UPTATE')
DROP TRIGGER TRIGGER_UPTATE
GO
CREATE  TRIGGER  TRIGGER_UPTATE  ON BOOK
FOR  INSERT, UPDATE
AS IF EXISTS( SELECT * FROM INSERTED WHERE BPC='清华大学出版社' and PRICE>100 )
BEGIN PRINT '图书定价不能超过100元'
ROLLBACK 
END
GO

/*为SC表定义一个插入和更新触发器REIGGER_UPTADE2，在此触发器中保证成绩在0~100*/
IF EXISTS(SELECT NAME FROM sysobjects WHERE name = 'TRIGGER_UPTATE2')
DROP TRIGGER TRIGGER_UPTATE2
GO
CREATE  TRIGGER  TRIGGER_UPTATE2  ON sc
FOR  INSERT, UPDATE AS 
IF EXISTS( SELECT * FROM INSERTED WHERE grade < 0 and grade > 100)
BEGIN PRINT '成绩必须在0到100之间！'
ROLLBACK 
END
GO
